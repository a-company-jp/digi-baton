// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: devices.mut.sql

package query

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createDevice = `-- name: CreateDevice :one
INSERT INTO devices(
                    device_type,
                    device_description,
                    device_username,
                    device_icon_url,
                    enc_password,
                    memo,
                    message,
                    passer_id,
                    trust_id,
                    is_disclosed,
                    custom_data)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, false, $10)
RETURNING id, device_type, device_description, device_username, device_icon_url, enc_password, memo, message, passer_id, trust_id, is_disclosed, custom_data
`

type CreateDeviceParams struct {
	DeviceType        int32
	DeviceDescription pgtype.Text
	DeviceUsername    pgtype.Text
	DeviceIconUrl     pgtype.Text
	EncPassword       []byte
	Memo              string
	Message           string
	PasserID          pgtype.UUID
	TrustID           pgtype.Int4
	CustomData        []byte
}

func (q *Queries) CreateDevice(ctx context.Context, arg CreateDeviceParams) (Device, error) {
	row := q.db.QueryRow(ctx, createDevice,
		arg.DeviceType,
		arg.DeviceDescription,
		arg.DeviceUsername,
		arg.DeviceIconUrl,
		arg.EncPassword,
		arg.Memo,
		arg.Message,
		arg.PasserID,
		arg.TrustID,
		arg.CustomData,
	)
	var i Device
	err := row.Scan(
		&i.ID,
		&i.DeviceType,
		&i.DeviceDescription,
		&i.DeviceUsername,
		&i.DeviceIconUrl,
		&i.EncPassword,
		&i.Memo,
		&i.Message,
		&i.PasserID,
		&i.TrustID,
		&i.IsDisclosed,
		&i.CustomData,
	)
	return i, err
}

const deleteDevice = `-- name: DeleteDevice :one
DELETE FROM devices
WHERE id = $1 AND passer_id = $2
RETURNING id, device_type, device_description, device_username, device_icon_url, enc_password, memo, message, passer_id, trust_id, is_disclosed, custom_data
`

type DeleteDeviceParams struct {
	ID       int32
	PasserID pgtype.UUID
}

func (q *Queries) DeleteDevice(ctx context.Context, arg DeleteDeviceParams) (Device, error) {
	row := q.db.QueryRow(ctx, deleteDevice, arg.ID, arg.PasserID)
	var i Device
	err := row.Scan(
		&i.ID,
		&i.DeviceType,
		&i.DeviceDescription,
		&i.DeviceUsername,
		&i.DeviceIconUrl,
		&i.EncPassword,
		&i.Memo,
		&i.Message,
		&i.PasserID,
		&i.TrustID,
		&i.IsDisclosed,
		&i.CustomData,
	)
	return i, err
}

const setDeviceDisclosureStatus = `-- name: SetDeviceDisclosureStatus :one
UPDATE devices
SET is_disclosed = $2,
    trust_id = $3
WHERE id = $1
RETURNING id, device_type, device_description, device_username, device_icon_url, enc_password, memo, message, passer_id, trust_id, is_disclosed, custom_data
`

type SetDeviceDisclosureStatusParams struct {
	ID          int32
	IsDisclosed bool
	TrustID     pgtype.Int4
}

func (q *Queries) SetDeviceDisclosureStatus(ctx context.Context, arg SetDeviceDisclosureStatusParams) (Device, error) {
	row := q.db.QueryRow(ctx, setDeviceDisclosureStatus, arg.ID, arg.IsDisclosed, arg.TrustID)
	var i Device
	err := row.Scan(
		&i.ID,
		&i.DeviceType,
		&i.DeviceDescription,
		&i.DeviceUsername,
		&i.DeviceIconUrl,
		&i.EncPassword,
		&i.Memo,
		&i.Message,
		&i.PasserID,
		&i.TrustID,
		&i.IsDisclosed,
		&i.CustomData,
	)
	return i, err
}

const updateDevice = `-- name: UpdateDevice :one
UPDATE devices
SET device_type = $2,
    device_description = $3,
    device_username = $4,
    device_icon_url = $5,
    enc_password = $6,
    memo = $7,
    message = $8,
    custom_data = $9
WHERE id = $1
RETURNING id, device_type, device_description, device_username, device_icon_url, enc_password, memo, message, passer_id, trust_id, is_disclosed, custom_data
`

type UpdateDeviceParams struct {
	ID                int32
	DeviceType        int32
	DeviceDescription pgtype.Text
	DeviceUsername    pgtype.Text
	DeviceIconUrl     pgtype.Text
	EncPassword       []byte
	Memo              string
	Message           string
	CustomData        []byte
}

func (q *Queries) UpdateDevice(ctx context.Context, arg UpdateDeviceParams) (Device, error) {
	row := q.db.QueryRow(ctx, updateDevice,
		arg.ID,
		arg.DeviceType,
		arg.DeviceDescription,
		arg.DeviceUsername,
		arg.DeviceIconUrl,
		arg.EncPassword,
		arg.Memo,
		arg.Message,
		arg.CustomData,
	)
	var i Device
	err := row.Scan(
		&i.ID,
		&i.DeviceType,
		&i.DeviceDescription,
		&i.DeviceUsername,
		&i.DeviceIconUrl,
		&i.EncPassword,
		&i.Memo,
		&i.Message,
		&i.PasserID,
		&i.TrustID,
		&i.IsDisclosed,
		&i.CustomData,
	)
	return i, err
}
